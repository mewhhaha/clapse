#!/usr/bin/env bash
set -euo pipefail
SELF_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
export CLAPSE_COMPILER_WASM_PATH="${CLAPSE_COMPILER_WASM_PATH:-${SELF_DIR}/clapse_compiler.wasm}"
export CLAPSE_ALLOW_HOST_COMPILE_FALLBACK="${CLAPSE_ALLOW_HOST_COMPILE_FALLBACK:-0}"
export CLAPSE_ALLOW_HOST_SELFHOST_FALLBACK="${CLAPSE_ALLOW_HOST_SELFHOST_FALLBACK:-0}"
exec deno run -A "https://raw.githubusercontent.com/mewhhaha/clapse/v0.1.0.2/scripts/clapse.mjs" --wasm "$@"
